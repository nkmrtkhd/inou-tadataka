<?xml version="1.0" encoding="UTF-8" ?>
<!-- Last Modified <2011-08-23 01:57:19 by NAKAMURA Takahide> -->

  <project name="Tadataka" default="run" basedir=".">


    <!-- environment -->
    <property environment="env" />
    <property name="dbg" value="on" />
    <property name="java"      value="${JAVA_HOME}/bin/java" />
    <property name="jar"       value="${JAVA_HOME}/bin/jar" />
    <property name="jarsigner" value="${JAVA_HOME}/bin/jarsigner" />


    <property name="browser_lib" value="BareBonesBrowserLaunch.jar" />


    <!-- set classpath -->
    <path id="libpath_ref">
      <pathelement path="." />
      <pathelement path="${browser_lib}" />
    </path>

    <!-- make -->
    <target name="make">
      <javac includeAntRuntime="true" encoding="UTF-8" srcdir="." deprecation="on" debug="${dbg}" source="1.5" target="1.5">
        <include name="*.java" />
        <classpath refid="libpath_ref" />
      </javac>
    </target>

    <!-- run -->
    <target name="run" depends="make" description="run">
      <java classname="Tadataka" classpath="." fork="yes" maxmemory="1024m"  >
        <classpath refid="libpath_ref" />
        <arg line="dat.in" />
      </java>
    </target>

    <!-- jar -->
    <target name="jar" depends="make " >
      <jar destfile="Tadataka.jar" basedir=".">
        <include name="**/*.class" />
        <include name="icon/**" />
        <zipfileset src="${browser_lib}" />
        <manifest>
          <attribute name="Main-Class" value="Tadataka" />
          <attribute name="Class-Path" value="." />
          <attribute name="Implementation-Title" value="GTracer" />
          <attribute name="Implementation-Version" value="1" />
          <attribute name="Implementation-Vender" value="Ogata Lab.(NIT)" />
        </manifest>
      </jar>
    </target>



    <!-- Clean -->
    <target name="clean" >
      <delete>
        <fileset dir="." includes="**/*.class" />
        <fileset dir="." includes="Tadataka.jar" />
      </delete>
    </target>


  </project>
